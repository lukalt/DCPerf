#!/bin/bash
# File: adsim/build.sh

cmake \
     -DCMAKE_BUILD_TYPE=Release \
     -DCMAKE_C_COMPILER="${ADSIM_C_COMPILER}" \
     -DCMAKE_CXX_COMPILER="${ADSIM_CXX_COMPILER}" \
     -DCMAKE_PREFIX_PATH="${ADSIM_STAGING_DIR}" \
     -DCMAKE_INSTALL_PREFIX="${ADSIM_STAGING_DIR}" \
     -DFBGEMM_BUILD_DIR="${FBGEMM_STAGING_DIR}" \
     -DFBGEMM_SRC_DIR="${FBGEMM_STAGING_DIR}/fbgemm" \
     -DFOLLY_MEMCPY_IS_MEMCPY=1 \
     -DFOLLY_DIR="${ADSIM_DEPS_DIR}/folly/folly" \
     ..

make -j "$(nproc)" VERBOSE=1
